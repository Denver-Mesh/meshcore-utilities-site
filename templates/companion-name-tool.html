<!DOCTYPE html>
<html lang="en">
<head>
    <title>MeshCore Utilities</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <script src="{{ url_for('static', filename='js/companion_name_tool.js') }}"></script>
</head>
<body>
<div class="container">
    <h1>MeshCore Companion Configuration Generator</h1>
    <p class="subtitle">
        Configure your Denver MeshCore companion details
        <br>
        <small style="font-size: 13px; opacity: 0.8;">
            This tool follows <a href="https://github.com/Denver-Mesh/docs/blob/master/MeshCore/standards/naming/v2.1.md" style="color: #667eea; text-decoration: none;">Denver MeshCore Naming Convention v2.1</a>.
        </small>
    </p>

    <div id="validation-error" class="validation-message" style="display: none;">
        <strong>‚ö†Ô∏è Please fill out all required fields before submitting.</strong>
    </div>

    <form id="companion-form" method="post" action="/companion_name_tool/submit" novalidate>
        <div class="form-group">
            <label for="handle">Handle or Username: <span class="required">*</span></label>
            <input id="handle" name="handle" type="text" maxlength="10" placeholder="e.g., 'MESHMASTER'" required>
            <span class="help-text">
                    Enter a username or handle that represents you on the mesh.<br/>
                <b>Avoid special characters, and do NOT use your real name!</b>
                </span>
        </div>

        <div class="form-group">
            <label for="emoji">Emoji (Optional): </label>
            <input id="emoji" name="emoji" type="text" placeholder="üôÇ">
            <span class="help-text">
                    Enter an optional emoji as a shortcode to represent you on the mesh.<br/>
                <b>This should be unique and used across all your companions.</b>
                </span>
        </div>

        <div class="form-group">
            <label>Identification Strategy: <span class="required">*</span></label>
            <span class="help-text">Choose how to identify this specific companion</span>

            <div class="strategy-options">
                <div class="strategy-option-block">
                    <div class="strategy-option">
                        <input type="radio" id="strategy-publickey" name="suffix_strategy" value="publickey" required>
                        <label for="strategy-publickey">By Public Key (Default)</label>
                    </div>
                    <span class="help-text">
                        Use the companion's public key as the suffix. This is the default and most common method.
                    </span>
                </div>

                <div class="strategy-option-block">
                    <div class="strategy-option">
                        <input type="radio" id="strategy-role" name="suffix_strategy" value="role" required>
                        <label for="strategy-role">Assign Specific Role</label>
                    </div>
                    <span class="help-text">
                        Assign a specific role to this companion. Do not reuse the same role for multiple companions.
                    </span>

                    <div id="suffix-strategy" class="strategy-input" style="display: none;">
                        <label for="role-type-select">Select Companion Role: </label>
                        <select id="role-type-select" name="role-type">
                            {% for role_type in role_types %}
                            <option value="{{ role_type.code }}">{{ role_type.human_readable }}</option>
                            {% endfor %}
                        </select>
                        <span class="help-text">
                        Choose the role for this companion.
                    </span>
                        <details>
                            <summary>What do these options mean?</summary>
                            <ul>
                                {% for role_type in role_types %}
                                <li><b>{{ role_type.human_readable }}</b>: {{ role_type.description }}</li>
                                {% endfor %}
                            </ul>
                        </details>
                    </div>
                </div>

                <div class="strategy-option-block">
                    <div class="strategy-option">
                        <input type="radio" id="strategy-number" name="suffix_strategy" value="number" required>
                        <label for="strategy-number">Assign Specific Number (1-99)</label>
                    </div>
                    <span class="help-text">
                        Number your companions 1 to 99. This could be in order of importance, in order of creation, etc.
                    </span>

                    <div id="number-input" class="strategy-input" style="display: none;">
                        <label for="suffix-number">Enter Number: </label>
                        <input type="number" id="suffix-number" name="suffix-number" min="1" max="99" placeholder="e.g., 1">
                    </div>
                </div>
            </div>

        </div>

        <button type="submit" id="submit-btn">Generate Configuration</button>

    </form>

    <div id="result"></div>
</div>
</body>
</html>
