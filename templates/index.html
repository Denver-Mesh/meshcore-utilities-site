<!DOCTYPE html>
<html lang="en">
<head>
    <title>DenverMesh Utilities</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
</head>
<body>
<div class="container">
    <h1>MeshCore Repeater Configuration Generator</h1>
    <p class="subtitle">Configure your MeshCore repeater details</p>

    <div id="validation-error" class="validation-message" style="display: none;">
        <strong>âš  Please fill out all required fields before submitting.</strong>
    </div>

    <form id="repeater-form" method="post" action="/api/generate_repeater_details" novalidate>
        <div class="form-group">
            <label for="city">City:</label>
            <select id="city" name="city" required>
                {% for city in cities %}
                <option value="{{ city.code }}">{{ city.name }}</option>
                {% endfor %}
            </select>
            <span class="help-text">
                    Select the city where this repeater will be located.
                    <br/>
                    <b>If the landmark is well-known or spans multiple cities, you can skip this field.</b>
                </span>
        </div>

        <div class="form-group">
            <label for="landmark">Landmark: <span class="required">*</span></label>
            <input id="landmark" name="landmark" type="text" maxlength="7" placeholder="e.g., 'COLFAX'" required>
            <span class="help-text">
                    Enter a recognizable landmark name abbreviation (max <span id="landmark-length">7</span> characters)
                </span>
        </div>

        <div class="form-group">
            <label for="node-type">Node Type: <span class="required">*</span></label>
            <select id="node-type" name="node-type" required>
                {% for node_type in node_types %}
                <option value="{{ node_type.code }}">{{ node_type.human_readable }}</option>
                {% endfor %}
            </select>
            <span class="help-text">
                    Choose the role type for this node.
                </span>
            <details>
                <summary>What do these options mean?</summary>
                <ul>
                    {% for node_type in node_types %}
                    <li><b>{{ node_type.human_readable }}</b>: {{ node_type.description }}</li>
                    {% endfor %}
                </ul>
            </details>
        </div>

        <div class="form-group checkbox-group">
            <label for="is-observer">
                <input id="is-observer" name="is-observer" type="checkbox">
                <span>Is Observer</span>
            </label>
            <span class="help-text">
                    Enable if this node will also operate as a <a href="https://analyzer.letsmesh.net/observer/onboard">LetsMesh observer</a>.
                </span>
        </div>

        <button type="submit" id="submit-btn">Generate Configuration</button>
    </form>

    <div id="result"></div>
</div>
</body>
</html>
